import{R as P,g as me,r as h,j as d,c as be}from"./client-Dsk2-liH.js";var te={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},G=P.createContext&&P.createContext(te),ve=["attr","size","title"];function xe(e,o){if(e==null)return{};var n=ye(e,o),r,u;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(u=0;u<m.length;u++)r=m[u],!(o.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ye(e,o){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(o.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function Z(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?arguments[o]:{};o%2?Z(Object(n),!0).forEach(function(r){we(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function we(e,o,n){return o=Oe(o),o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}function Oe(e){var o=Ce(e,"string");return typeof o=="symbol"?o:o+""}function Ce(e,o){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,o);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(e)}function re(e){return e&&e.map((o,n)=>P.createElement(o.tag,z({key:n},o.attr),re(o.child)))}function ne(e){return o=>P.createElement(je,_({attr:z({},e.attr)},o),re(e.child))}function je(e){var o=n=>{var{attr:r,size:u,title:m}=e,M=xe(e,ve),g=u||n.size||"1em",w;return n.className&&(w=n.className),e.className&&(w=(w?w+" ":"")+e.className),P.createElement("svg",_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,M,{className:w,style:z(z({color:e.color||n.color},n.style),e.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),m&&P.createElement("title",null,m),e.children)};return G!==void 0?P.createElement(G.Consumer,null,n=>o(n)):o(te)}function Ee(e){return ne({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function Re(e){return ne({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.854 12.854c-0-0-0-0-0-0l-4.854-4.854 4.854-4.854c0-0 0-0 0-0 0.052-0.052 0.090-0.113 0.114-0.178 0.066-0.178 0.028-0.386-0.114-0.529l-2.293-2.293c-0.143-0.143-0.351-0.181-0.529-0.114-0.065 0.024-0.126 0.062-0.178 0.114 0 0-0 0-0 0l-4.854 4.854-4.854-4.854c-0-0-0-0-0-0-0.052-0.052-0.113-0.090-0.178-0.114-0.178-0.066-0.386-0.029-0.529 0.114l-2.293 2.293c-0.143 0.143-0.181 0.351-0.114 0.529 0.024 0.065 0.062 0.126 0.114 0.178 0 0 0 0 0 0l4.854 4.854-4.854 4.854c-0 0-0 0-0 0-0.052 0.052-0.090 0.113-0.114 0.178-0.066 0.178-0.029 0.386 0.114 0.529l2.293 2.293c0.143 0.143 0.351 0.181 0.529 0.114 0.065-0.024 0.126-0.062 0.178-0.114 0-0 0-0 0-0l4.854-4.854 4.854 4.854c0 0 0 0 0 0 0.052 0.052 0.113 0.090 0.178 0.114 0.178 0.066 0.386 0.029 0.529-0.114l2.293-2.293c0.143-0.143 0.181-0.351 0.114-0.529-0.024-0.065-0.062-0.126-0.114-0.178z"},child:[]}]})(e)}var H={exports:{}},W,J;function Pe(){if(J)return W;J=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return W=e,W}var A,Q;function Me(){if(Q)return A;Q=1;var e=Pe();function o(){}function n(){}return n.resetWarningCache=o,A=function(){function r(M,g,w,b,O,R){if(R!==e){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function u(){return r}var m={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:u,element:r,elementType:r,instanceOf:u,node:r,objectOf:u,oneOf:u,oneOfType:u,shape:u,exact:u,checkPropTypes:n,resetWarningCache:o};return m.PropTypes=m,m},A}var ee;function $e(){return ee||(ee=1,H.exports=Me()()),H.exports}var Te=$e();const E=me(Te),oe=h.forwardRef(({children:e,onSelectionChange:o,onSelectionComplete:n,minSelectionSize:r=10,handleSize:u=8,className:m="",style:M={},enabled:g=!0},w)=>{const b=h.useRef(null),[O,R]=h.useState(!1),[v,B]=h.useState(!1),[C,T]=h.useState("none"),[$,se]=h.useState({x:0,y:0}),[a,k]=h.useState({x:0,y:0,width:0,height:0}),[I,ie]=h.useState({x:0,y:0}),[F,L]=h.useState(null),[y,ae]=h.useState({width:0,height:0});h.useEffect(()=>{if(b.current){const s=()=>{ae({width:b.current.offsetWidth,height:b.current.offsetHeight})};s();const c=new ResizeObserver(s);return c.observe(b.current),()=>{b.current&&c.unobserve(b.current)}}},[]);const q=h.useCallback((s,c)=>{let{x:t,y:i,width:l,height:p}=a,f,x;switch(F){case"topleft":f=Math.min(s,t+l-r),x=Math.min(c,i+p-r),l=t+l-f,p=i+p-x,t=f,i=x;break;case"topright":x=Math.min(c,i+p-r),l=Math.max(r,s-t),p=i+p-x,i=x;break;case"bottomleft":f=Math.min(s,t+l-r),l=t+l-f,p=Math.max(r,c-i),t=f;break;case"bottomright":l=Math.max(r,s-t),p=Math.max(r,c-i);break;case"top":x=Math.min(c,i+p-r),p=i+p-x,i=x;break;case"bottom":p=Math.max(r,c-i);break;case"left":f=Math.min(s,t+l-r),l=t+l-f,t=f;break;case"right":l=Math.max(r,s-t);break}k({x:Math.max(0,t),y:Math.max(0,i),width:Math.min(l,y.width-t),height:Math.min(p,y.height-i)})},[a,F,r,y]),j=(s,c,t,i,l,p)=>s>=t&&s<=t+l&&c>=i&&c<=i+p,Y=h.useCallback((s,c)=>{if(!v)return null;const t=u+4,{x:i,y:l,width:p,height:f}=a;return j(s,c,i-t/2,l-t/2,t,t)?"topleft":j(s,c,i+p-t/2,l-t/2,t,t)?"topright":j(s,c,i-t/2,l+f-t/2,t,t)?"bottomleft":j(s,c,i+p-t/2,l+f-t/2,t,t)?"bottomright":j(s,c,i+p/2-t/2,l-t/2,t,t)?"top":j(s,c,i+p/2-t/2,l+f-t/2,t,t)?"bottom":j(s,c,i-t/2,l+f/2-t/2,t,t)?"left":j(s,c,i+p-t/2,l+f/2-t/2,t,t)?"right":null},[v,a,u]),ce=h.useCallback(s=>{if(!g||!b.current)return;const c=b.current.getBoundingClientRect(),t=s.clientX-c.left,i=s.clientY-c.top;if(v){const l=Y(t,i);if(l){R(!0),T("resize"),L(l);return}if(t>=a.x&&t<=a.x+a.width&&i>=a.y&&i<=a.y+a.height){R(!0),T("move"),ie({x:t-a.x,y:i-a.y});return}}R(!0),T("select"),se({x:t,y:i}),k({x:t,y:i,width:0,height:0})},[g,v,a,Y]),X=h.useCallback(s=>{if(!O||!b.current)return;const c=b.current.getBoundingClientRect(),t=Math.max(0,Math.min(s.clientX-c.left,y.width)),i=Math.max(0,Math.min(s.clientY-c.top,y.height));if(C==="select")k({x:Math.min($.x,t),y:Math.min($.y,i),width:Math.abs(t-$.x),height:Math.abs(i-$.y)});else if(C==="move"){const l=Math.max(0,Math.min(t-I.x,y.width-a.width)),p=Math.max(0,Math.min(i-I.y,y.height-a.height));k(f=>({...f,x:l,y:p}))}else C==="resize"&&q(t,i);o&&o(a)},[O,C,$,a,I,q,y,o]),D=h.useCallback(()=>{B(!1),k({x:0,y:0,width:0,height:0})},[]),U=h.useCallback(()=>{O&&(C==="select"&&(a.width>r&&a.height>r?B(!0):D()),R(!1),T("none"),L(null),n&&n(a))},[O,C,a,r,n,D]),le=s=>{switch(s){case"topleft":case"bottomright":return"nwse-resize";case"topright":case"bottomleft":return"nesw-resize";case"top":case"bottom":return"ns-resize";case"left":case"right":return"ew-resize";default:return"move"}};h.useEffect(()=>{const s=t=>X(t),c=()=>U();return document.addEventListener("mousemove",s),document.addEventListener("mouseup",c),()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",c)}},[X,U]);const ue=h.useCallback(()=>{if(!v||!b.current)return null;const s=b.current.getBoundingClientRect(),c=window.pageXOffset||document.documentElement.scrollLeft,t=window.pageYOffset||document.documentElement.scrollTop;return{x:s.left+a.x+c,y:s.top+a.y+t,width:a.width,height:a.height,relative:{...a}}},[v,a]);h.useImperativeHandle(w,()=>({getCoordinates:ue,resetSelection:D,hasActiveSelection:()=>v,getSelectionRect:()=>({...a})}));const he=()=>{if(!O&&!v)return"none";if(O&&a.width===0&&a.height===0){const{x:pe,y:fe}=$,de=y.width,ge=y.height,N=pe/de*100,S=fe/ge*100;return`polygon(0% 0%, 0% 100%, 100% 100%, 100% 0%, 0% 0%, ${N}% ${S}%, ${N+.1}% ${S}%, ${N+.1}% ${S+.1}%, ${N}% ${S+.1}%, ${N}% ${S}%)`}const{x:s,y:c,width:t,height:i}=a,l=y.width,p=y.height,f=s/l*100,x=c/p*100,K=(s+t)/l*100,V=(c+i)/p*100;return`polygon(0% 0%, 0% 100%, 100% 100%, 100% 0%, 0% 0%, ${f}% ${x}%, ${K}% ${x}%, ${K}% ${V}%, ${f}% ${V}%, ${f}% ${x}%)`};return d.jsxs("div",{ref:b,className:`element-selector ${m}`,style:{position:"relative",...M},onMouseDown:g?ce:void 0,children:[e,g&&d.jsx("div",{className:"selection-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:O||v?"rgba(0, 0, 0, 0.5)":"transparent",clipPath:he(),pointerEvents:"none",zIndex:1e3,transition:"background-color 0.1s ease"}}),g&&O&&C==="select"&&d.jsx("div",{className:"selection-in-progress animated-border",style:{position:"absolute",left:`${a.x}px`,top:`${a.y}px`,width:`${a.width}px`,height:`${a.height}px`,border:"2px dashed rgba(0, 255, 0, 0.8)",backgroundColor:"transparent",boxSizing:"border-box",pointerEvents:"none",zIndex:1001}}),g&&v&&d.jsx("div",{className:"selection-rect",style:{position:"absolute",left:`${a.x}px`,top:`${a.y}px`,width:`${a.width}px`,height:`${a.height}px`,border:C==="resize"?"2px dashed rgba(0, 255, 0, 0.8)":"2px solid rgba(0, 255, 0, 0.8)",backgroundColor:"transparent",boxSizing:"border-box",cursor:"move",zIndex:1001},children:["topleft","top","topright","right","bottomright","bottom","bottomleft","left"].map(s=>d.jsx("div",{className:`resize-handle ${s}`,style:{position:"absolute",width:`${u}px`,height:`${u}px`,backgroundColor:"white",border:C==="resize"?"2px dashed rgba(0, 255, 0, 0.8)":"2px solid rgba(0, 100, 0, 0.8)",borderRadius:"50%",pointerEvents:"all",cursor:le(s),...ke(s,u),zIndex:1002},onMouseDown:c=>{c.stopPropagation(),R(!0),T("resize"),L(s)}},s))})]})});function ke(e,o){const n=o/2;switch(e){case"topleft":return{top:-n,left:-n};case"top":return{top:-n,left:`calc(50% - ${n}px)`};case"topright":return{top:-n,right:-n};case"right":return{top:`calc(50% - ${n}px)`,right:-n};case"bottomright":return{bottom:-n,right:-n};case"bottom":return{bottom:-n,left:`calc(50% - ${n}px)`};case"bottomleft":return{bottom:-n,left:-n};case"left":return{top:`calc(50% - ${n}px)`,left:-n};default:return{}}}oe.propTypes={children:E.node.isRequired,onSelectionChange:E.func,onSelectionComplete:E.func,minSelectionSize:E.number,handleSize:E.number,className:E.string,style:E.object,enabled:E.bool};function Ne(){const e=h.useRef(null),o=h.useRef(null),[n,r]=h.useState(!1),u=h.useCallback(()=>{window.postMessage({type:"I_C_SELECT_CANCEL"},"*")},[]),m=h.useCallback(()=>{if(!e.current||!e.current.hasActiveSelection()){console.log("No active selection found"),u();return}const g=e.current.getCoordinates();console.log("Selection coordinates:",g),window.postMessage({type:"I_C_SELECT_COORDS",data:{coordinates:g}},"*")},[u]),M=h.useCallback(()=>{setTimeout(()=>{if(e.current){const g=e.current.hasActiveSelection();r(g)}},0)},[]);return h.useEffect(()=>{const g=w=>{w.key==="Escape"&&u(),w.key==="Enter"&&m()};return document.addEventListener("keyup",g),o.current&&o.current.focus(),()=>{document.removeEventListener("keyup",g)}},[u,m]),d.jsxs(d.Fragment,{children:[d.jsx(oe,{ref:e,className:"relative z-1 w-[100svw] h-[100svh]",onSelectionChange:()=>{if(e.current){const g=e.current.hasActiveSelection();r(g)}},onSelectionComplete:M,minSelectionSize:5}),d.jsxs("div",{className:`absolute z-2 bottom-2 right-2 gap-2 flex transition-all duration-200 ${n?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[d.jsxs("button",{className:"group inline-flex items-center justify-center rounded-lg border border-red-600 bg-red-600 w-14 h-10 text-white hover:bg-transparent hover:text-red-600 focus:ring-3 focus:outline-hidden cursor-pointer transition-all duration-200",onClick:u,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15",className:"absolute size-10 opacity-100 fill-white group-hover:opacity-0 transition-all duration-200",children:d.jsx("path",{className:"fill-amber-50",clipRule:"evenodd",d:"m2 5.5c0-.27614.22386-.5.5-.5h2c.27614 0 .5.22386.5.5s-.22386.5-.5.5h-1.5v1h.5c.27614 0 .5.22386.5.5s-.22386.5-.5.5h-.5v1h1.5c.27614 0 .5.22386.5.5s-.22386.5-.5.5h-2c-.27614 0-.5-.22386-.5-.5zm4 0c0-.27614.22386-.5.5-.5h2c.27614 0 .5.22386.5.5s-.22386.5-.5.5h-1.5v1h1.5c.27614 0 .5.22386.5.5v2c0 .27614-.22386.5-.5.5h-2c-.27614 0-.5-.22386-.5-.5s.22386-.5.5-.5h1.5v-1h-1.5c-.27614 0-.5-.22386-.5-.5zm4 0c0-.27614.2239-.5.5-.5h2c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-1.5v3h1.5c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-2c-.2761 0-.5-.22386-.5-.5z",fillRule:"evenodd"})}),d.jsx(Re,{className:"absolute size-5 opacity-0 group-hover:opacity-100 transition-all duration-200"})]}),d.jsxs("button",{className:"group inline-flex items-center justify-center rounded-lg border border-green-600 bg-green-600 w-14 h-10 text-white hover:bg-transparent hover:text-green-600 focus:ring-3 focus:outline-hidden cursor-pointer transition-all duration-200",onClick:m,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"absolute size-10 opacity-100 fill-white group-hover:opacity-0 transition-all duration-200",children:d.jsx("path",{d:"M19,6a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H7.41l1.3-1.29A1,1,0,0,0,7.29,9.29l-3,3a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l3,3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L7.41,14H17a3,3,0,0,0,3-3V7A1,1,0,0,0,19,6Z"})}),d.jsx(Ee,{className:"absolute size-6 opacity-0 group-hover:opacity-100 transition-all duration-200"})]})]})]})}function Se(){return d.jsx(h.StrictMode,{children:d.jsx("div",{className:"w-full h-full bg-transparent",children:d.jsx(Ne,{})})})}be.createRoot(document.getElementById("root")).render(d.jsx(Se,{}));
