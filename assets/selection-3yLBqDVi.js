import{g as le,r as a,j as u,c as he}from"./client-Dsk2-liH.js";import{G as K}from"./iconBase-rRARMq-L.js";function ue(p){return K({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(p)}function pe(p){return K({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.854 12.854c-0-0-0-0-0-0l-4.854-4.854 4.854-4.854c0-0 0-0 0-0 0.052-0.052 0.090-0.113 0.114-0.178 0.066-0.178 0.028-0.386-0.114-0.529l-2.293-2.293c-0.143-0.143-0.351-0.181-0.529-0.114-0.065 0.024-0.126 0.062-0.178 0.114 0 0-0 0-0 0l-4.854 4.854-4.854-4.854c-0-0-0-0-0-0-0.052-0.052-0.113-0.090-0.178-0.114-0.178-0.066-0.386-0.029-0.529 0.114l-2.293 2.293c-0.143 0.143-0.181 0.351-0.114 0.529 0.024 0.065 0.062 0.126 0.114 0.178 0 0 0 0 0 0l4.854 4.854-4.854 4.854c-0 0-0 0-0 0-0.052 0.052-0.090 0.113-0.114 0.178-0.066 0.178-0.029 0.386 0.114 0.529l2.293 2.293c0.143 0.143 0.351 0.181 0.529 0.114 0.065-0.024 0.126-0.062 0.178-0.114 0-0 0-0 0-0l4.854-4.854 4.854 4.854c0 0 0 0 0 0 0.052 0.052 0.113 0.090 0.178 0.114 0.178 0.066 0.386 0.029 0.529-0.114l2.293-2.293c0.143-0.143 0.181-0.351 0.114-0.529-0.024-0.065-0.062-0.126-0.114-0.178z"},child:[]}]})(p)}var _={exports:{}},L,U;function de(){if(U)return L;U=1;var p="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return L=p,L}var H,G;function fe(){if(G)return H;G=1;var p=de();function v(){}function l(){}return l.resetWarningCache=v,H=function(){function s(S,f,E,g,y,$){if($!==p){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}s.isRequired=s;function d(){return s}var w={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:d,element:s,elementType:s,instanceOf:d,node:s,objectOf:d,oneOf:d,oneOfType:d,shape:d,exact:d,checkPropTypes:l,resetWarningCache:v};return w.PropTypes=w,w},H}var V;function ge(){return V||(V=1,_.exports=fe()()),_.exports}var me=ge();const M=le(me),Z=a.forwardRef(({children:p,onSelectionChange:v,onSelectionComplete:l,minSelectionSize:s=10,handleSize:d=8,className:w="",style:S={},enabled:f=!0},E)=>{const g=a.useRef(null),[y,$]=a.useState(!1),[m,A]=a.useState(!1),[C,T]=a.useState("none"),[k,J]=a.useState({x:0,y:0}),[o,j]=a.useState({x:0,y:0,width:0,height:0}),[P,Q]=a.useState({x:0,y:0}),[W,z]=a.useState(null),[x,ee]=a.useState({width:0,height:0});a.useEffect(()=>{if(g.current){const t=()=>{ee({width:g.current.offsetWidth,height:g.current.offsetHeight})};t();const n=new ResizeObserver(t);return n.observe(g.current),()=>{g.current&&n.unobserve(g.current)}}},[]);const D=a.useCallback((t,n)=>{let{x:e,y:r,width:i,height:c}=o,h,b;switch(W){case"topleft":h=Math.min(t,e+i-s),b=Math.min(n,r+c-s),i=e+i-h,c=r+c-b,e=h,r=b;break;case"topright":b=Math.min(n,r+c-s),i=Math.max(s,t-e),c=r+c-b,r=b;break;case"bottomleft":h=Math.min(t,e+i-s),i=e+i-h,c=Math.max(s,n-r),e=h;break;case"bottomright":i=Math.max(s,t-e),c=Math.max(s,n-r);break;case"top":b=Math.min(n,r+c-s),c=r+c-b,r=b;break;case"bottom":c=Math.max(s,n-r);break;case"left":h=Math.min(t,e+i-s),i=e+i-h,e=h;break;case"right":i=Math.max(s,t-e);break}j({x:Math.max(0,e),y:Math.max(0,r),width:Math.min(i,x.width-e),height:Math.min(c,x.height-r)})},[o,W,s,x]),R=(t,n,e,r,i,c)=>t>=e&&t<=e+i&&n>=r&&n<=r+c,B=a.useCallback((t,n)=>{if(!m)return null;const e=d+4,{x:r,y:i,width:c,height:h}=o;return R(t,n,r-e/2,i-e/2,e,e)?"topleft":R(t,n,r+c-e/2,i-e/2,e,e)?"topright":R(t,n,r-e/2,i+h-e/2,e,e)?"bottomleft":R(t,n,r+c-e/2,i+h-e/2,e,e)?"bottomright":R(t,n,r+c/2-e/2,i-e/2,e,e)?"top":R(t,n,r+c/2-e/2,i+h-e/2,e,e)?"bottom":R(t,n,r-e/2,i+h/2-e/2,e,e)?"left":R(t,n,r+c-e/2,i+h/2-e/2,e,e)?"right":null},[m,o,d]),te=a.useCallback(t=>{if(!f||!g.current)return;const n=g.current.getBoundingClientRect(),e=t.clientX-n.left,r=t.clientY-n.top;if(m){const i=B(e,r);if(i){$(!0),T("resize"),z(i);return}if(e>=o.x&&e<=o.x+o.width&&r>=o.y&&r<=o.y+o.height){$(!0),T("move"),Q({x:e-o.x,y:r-o.y});return}}$(!0),T("select"),J({x:e,y:r}),j({x:e,y:r,width:0,height:0})},[f,m,o,B]),F=a.useCallback(t=>{if(!y||!g.current)return;const n=g.current.getBoundingClientRect(),e=Math.max(0,Math.min(t.clientX-n.left,x.width)),r=Math.max(0,Math.min(t.clientY-n.top,x.height));if(C==="select")j({x:Math.min(k.x,e),y:Math.min(k.y,r),width:Math.abs(e-k.x),height:Math.abs(r-k.y)});else if(C==="move"){const i=Math.max(0,Math.min(e-P.x,x.width-o.width)),c=Math.max(0,Math.min(r-P.y,x.height-o.height));j(h=>({...h,x:i,y:c}))}else C==="resize"&&D(e,r);v&&v(o)},[y,C,k,o,P,D,x,v]),I=a.useCallback(()=>{A(!1),j({x:0,y:0,width:0,height:0})},[]),q=a.useCallback(()=>{y&&(C==="select"&&(o.width>s&&o.height>s?A(!0):I()),$(!1),T("none"),z(null),l&&l(o))},[y,C,o,s,l,I]),re=t=>{switch(t){case"topleft":case"bottomright":return"nwse-resize";case"topright":case"bottomleft":return"nesw-resize";case"top":case"bottom":return"ns-resize";case"left":case"right":return"ew-resize";default:return"move"}};a.useEffect(()=>{const t=e=>F(e),n=()=>q();return document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n)}},[F,q]);const oe=a.useCallback(()=>{if(!m||!g.current)return null;const t=g.current.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,e=window.pageYOffset||document.documentElement.scrollTop;return{x:t.left+o.x+n,y:t.top+o.y+e,width:o.width,height:o.height,relative:{...o}}},[m,o]);a.useImperativeHandle(E,()=>({getCoordinates:oe,resetSelection:I,hasActiveSelection:()=>m,getSelectionRect:()=>({...o})}));const ne=()=>{if(!y&&!m)return"none";if(y&&o.width===0&&o.height===0){const{x:se,y:ie}=k,ae=x.width,ce=x.height,N=se/ae*100,O=ie/ce*100;return`polygon(0% 0%, 0% 100%, 100% 100%, 100% 0%, 0% 0%, ${N}% ${O}%, ${N+.1}% ${O}%, ${N+.1}% ${O+.1}%, ${N}% ${O+.1}%, ${N}% ${O}%)`}const{x:t,y:n,width:e,height:r}=o,i=x.width,c=x.height,h=t/i*100,b=n/c*100,Y=(t+e)/i*100,X=(n+r)/c*100;return`polygon(0% 0%, 0% 100%, 100% 100%, 100% 0%, 0% 0%, ${h}% ${b}%, ${Y}% ${b}%, ${Y}% ${X}%, ${h}% ${X}%, ${h}% ${b}%)`};return u.jsxs("div",{ref:g,className:`element-selector ${w}`,style:{position:"relative",...S},onMouseDown:f?te:void 0,children:[p,f&&u.jsx("div",{className:"selection-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:y||m?"rgba(0, 0, 0, 0.5)":"transparent",clipPath:ne(),pointerEvents:"none",zIndex:1e3,transition:"background-color 0.1s ease"}}),f&&y&&C==="select"&&u.jsx("div",{className:"selection-in-progress animated-border",style:{position:"absolute",left:`${o.x}px`,top:`${o.y}px`,width:`${o.width}px`,height:`${o.height}px`,border:"2px dashed rgba(0, 255, 0, 0.8)",backgroundColor:"transparent",boxSizing:"border-box",pointerEvents:"none",zIndex:1001}}),f&&m&&u.jsx("div",{className:"selection-rect",style:{position:"absolute",left:`${o.x}px`,top:`${o.y}px`,width:`${o.width}px`,height:`${o.height}px`,border:C==="resize"?"2px dashed rgba(0, 255, 0, 0.8)":"2px solid rgba(0, 255, 0, 0.8)",backgroundColor:"transparent",boxSizing:"border-box",cursor:"move",zIndex:1001},children:["topleft","top","topright","right","bottomright","bottom","bottomleft","left"].map(t=>u.jsx("div",{className:`resize-handle ${t}`,style:{position:"absolute",width:`${d}px`,height:`${d}px`,backgroundColor:"white",border:C==="resize"?"2px dashed rgba(0, 255, 0, 0.8)":"2px solid rgba(0, 100, 0, 0.8)",borderRadius:"50%",pointerEvents:"all",cursor:re(t),...be(t,d),zIndex:1002},onMouseDown:n=>{n.stopPropagation(),$(!0),T("resize"),z(t)}},t))})]})});function be(p,v){const l=v/2;switch(p){case"topleft":return{top:-l,left:-l};case"top":return{top:-l,left:`calc(50% - ${l}px)`};case"topright":return{top:-l,right:-l};case"right":return{top:`calc(50% - ${l}px)`,right:-l};case"bottomright":return{bottom:-l,right:-l};case"bottom":return{bottom:-l,left:`calc(50% - ${l}px)`};case"bottomleft":return{bottom:-l,left:-l};case"left":return{top:`calc(50% - ${l}px)`,left:-l};default:return{}}}Z.propTypes={children:M.node.isRequired,onSelectionChange:M.func,onSelectionComplete:M.func,minSelectionSize:M.number,handleSize:M.number,className:M.string,style:M.object,enabled:M.bool};function xe(){const p=a.useRef(null),v=a.useRef(null),[l,s]=a.useState(!1),d=a.useCallback(()=>{window.parent.postMessage({type:"I_C_SELECT_CANCEL"},"*")},[]),w=a.useCallback(()=>{if(!p.current||!p.current.hasActiveSelection()){console.log("No active selection found"),d();return}const f=p.current.getCoordinates();console.log("Selection coordinates:",f),window.parent.postMessage({type:"I_C_SELECT_COORDS",data:{coordinates:f}},"*")},[d]),S=a.useCallback(()=>{setTimeout(()=>{if(p.current){const f=p.current.hasActiveSelection();s(f)}},0)},[]);return a.useEffect(()=>{const f=E=>{E.key==="Escape"&&d(),E.key==="Enter"&&w()};return document.addEventListener("keyup",f),v.current&&v.current.focus(),()=>{document.removeEventListener("keyup",f)}},[d,w]),u.jsxs(u.Fragment,{children:[u.jsx(Z,{ref:p,className:"relative z-1 w-[100svw] h-[100svh] cursor-pointer",onSelectionChange:()=>{if(p.current){const f=p.current.hasActiveSelection();s(f)}},onSelectionComplete:S,minSelectionSize:5}),u.jsxs("div",{className:"absolute z-2 bottom-2 right-2 gap-2 flex",children:[u.jsxs("button",{className:`group inline-flex items-center justify-center rounded-lg border border-green-600 bg-green-600 w-14 h-10 text-white hover:bg-transparent hover:text-green-600 focus:ring-3 focus:outline-hidden cursor-pointer transition-all duration-200 ${l?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:w,children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"absolute size-10 opacity-100 fill-white group-hover:opacity-0 transition-all duration-200",children:u.jsx("path",{d:"M19,6a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H7.41l1.3-1.29A1,1,0,0,0,7.29,9.29l-3,3a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l3,3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L7.41,14H17a3,3,0,0,0,3-3V7A1,1,0,0,0,19,6Z"})}),u.jsx(ue,{className:"absolute size-6 opacity-0 group-hover:opacity-100 transition-all duration-200"})]}),u.jsxs("button",{className:"group inline-flex items-center justify-center rounded-lg border border-red-600 bg-red-600 w-14 h-10 text-white hover:bg-transparent hover:text-red-600 focus:ring-3 focus:outline-hidden cursor-pointer transition-all duration-200",onClick:d,children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15",className:"absolute size-10 opacity-100 fill-white group-hover:opacity-0 transition-all duration-200",children:u.jsx("path",{className:"fill-amber-50",clipRule:"evenodd",d:"m2 5.5c0-.27614.22386-.5.5-.5h2c.27614 0 .5.22386.5.5s-.22386.5-.5.5h-1.5v1h.5c.27614 0 .5.22386.5.5s-.22386.5-.5.5h-.5v1h1.5c.27614 0 .5.22386.5.5s-.22386.5-.5.5h-2c-.27614 0-.5-.22386-.5-.5zm4 0c0-.27614.22386-.5.5-.5h2c.27614 0 .5.22386.5.5s-.22386.5-.5.5h-1.5v1h1.5c.27614 0 .5.22386.5.5v2c0 .27614-.22386.5-.5.5h-2c-.27614 0-.5-.22386-.5-.5s.22386-.5.5-.5h1.5v-1h-1.5c-.27614 0-.5-.22386-.5-.5zm4 0c0-.27614.2239-.5.5-.5h2c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-1.5v3h1.5c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-2c-.2761 0-.5-.22386-.5-.5z",fillRule:"evenodd"})}),u.jsx(pe,{className:"absolute size-5 opacity-0 group-hover:opacity-100 transition-all duration-200"})]})]})]})}function ve(){return u.jsx(a.StrictMode,{children:u.jsx("div",{className:"w-full h-full bg-transparent",children:u.jsx(xe,{})})})}he.createRoot(document.getElementById("root")).render(u.jsx(ve,{}));
