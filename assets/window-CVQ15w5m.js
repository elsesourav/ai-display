import{r as t,j as e,c as V}from"./client-Dsk2-liH.js";/* empty css             */import{G as v}from"./iconBase-rRARMq-L.js";function W(r){return v({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"m112 268 144 144 144-144M256 392V100"},child:[]}]})(r)}function q(r){return v({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(r)}function P(r){return v({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 64H96a64.07 64.07 0 0 0-64 64v256a64.07 64.07 0 0 0 64 64h320a64.07 64.07 0 0 0 64-64V128a64.07 64.07 0 0 0-64-64zm-80 64a48 48 0 1 1-48 48 48.05 48.05 0 0 1 48-48zM96 416a32 32 0 0 1-32-32v-67.63l94.84-84.3a48.06 48.06 0 0 1 65.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 0 1-32 32H217.63l121.42-121.42a47.72 47.72 0 0 1 61.64-.16L448 333.84z"},child:[]}]})(r)}function F(r){return v({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m476.59 227.05-.16-.07L49.35 49.84A23.56 23.56 0 0 0 27.14 52 24.65 24.65 0 0 0 16 72.59v113.29a24 24 0 0 0 19.52 23.57l232.93 43.07a4 4 0 0 1 0 7.86L35.53 303.45A24 24 0 0 0 16 327v113.31A23.57 23.57 0 0 0 26.59 460a23.94 23.94 0 0 0 13.22 4 24.55 24.55 0 0 0 9.52-1.93L476.4 285.94l.19-.09a32 32 0 0 0 0-58.8z"},child:[]}]})(r)}function $(r){return v({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 3a2 2 0 0 0-2 2"},child:[]},{tag:"path",attr:{d:"M19 3a2 2 0 0 1 2 2"},child:[]},{tag:"path",attr:{d:"M21 19a2 2 0 0 1-2 2"},child:[]},{tag:"path",attr:{d:"M5 21a2 2 0 0 1-2-2"},child:[]},{tag:"path",attr:{d:"M9 3h1"},child:[]},{tag:"path",attr:{d:"M9 21h1"},child:[]},{tag:"path",attr:{d:"M14 3h1"},child:[]},{tag:"path",attr:{d:"M14 21h1"},child:[]},{tag:"path",attr:{d:"M3 9v1"},child:[]},{tag:"path",attr:{d:"M21 9v1"},child:[]},{tag:"path",attr:{d:"M3 14v1"},child:[]},{tag:"path",attr:{d:"M21 14v1"},child:[]},{tag:"line",attr:{x1:"7",x2:"15",y1:"8",y2:"8"},child:[]},{tag:"line",attr:{x1:"7",x2:"17",y1:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"7",x2:"13",y1:"16",y2:"16"},child:[]}]})(r)}function Y(r){return v({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20.7134 8.12811L20.4668 8.69379C20.2864 9.10792 19.7136 9.10792 19.5331 8.69379L19.2866 8.12811C18.8471 7.11947 18.0555 6.31641 17.0677 5.87708L16.308 5.53922C15.8973 5.35653 15.8973 4.75881 16.308 4.57612L17.0252 4.25714C18.0384 3.80651 18.8442 2.97373 19.2761 1.93083L19.5293 1.31953C19.7058 0.893489 20.2942 0.893489 20.4706 1.31953L20.7238 1.93083C21.1558 2.97373 21.9616 3.80651 22.9748 4.25714L23.6919 4.57612C24.1027 4.75881 24.1027 5.35653 23.6919 5.53922L22.9323 5.87708C21.9445 6.31641 21.1529 7.11947 20.7134 8.12811ZM12 2C6.47715 2 2 6.47715 2 12C2 14.7614 3.11929 17.2614 4.92893 19.0711L2 22H12C17.5228 22 22 17.5228 22 12C22 11.5975 21.9762 11.2002 21.9298 10.8094L19.9437 11.0452C19.9809 11.3579 20 11.6765 20 12C20 16.4183 16.4183 20 12 20H6.82843L7.75736 19.0711L6.34315 17.6569C4.85124 16.1649 4 14.1524 4 12C4 7.58172 7.58172 4 12 4C12.6919 4 13.3618 4.0876 14 4.25179L14.4983 2.31487C13.6987 2.10914 12.8614 2 12 2ZM9 9H7V15H9V9ZM17 9H15V15H17V9ZM13 6H11V18H13V6Z"},child:[]}]})(r)}function Z(r){return v({attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.828 10.586l-9.414-9.414c-.391-.391-.902-.586-1.414-.586s-1.023.195-1.414.586l-9.414 9.414c-.781.779-.781 2.047 0 2.828l9.414 9.414c.391.391.902.586 1.414.586s1.023-.195 1.414-.586l9.414-9.414c.781-.781.781-2.049 0-2.828zm-5.828 5.414c-.256 0-.512-.098-.707-.293-.391-.391-.391-1.023 0-1.414l1.293-1.293h-4.586v4.586l1.293-1.293c.195-.195.451-.293.707-.293s.512.098.707.293c.391.391.391 1.023 0 1.414l-3.707 3.707-3.707-3.707c-.391-.391-.391-1.023 0-1.414.195-.195.451-.293.707-.293s.512.098.707.293l1.293 1.293v-4.586h-4.586l1.293 1.293c.391.391.391 1.023 0 1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-3.707-3.707 3.707-3.707c.195-.195.451-.293.707-.293s.512.098.707.293c.391.391.391 1.023 0 1.414l-1.293 1.293h4.586v-4.586l-1.293 1.293c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023 0-1.414l3.707-3.707 3.707 3.707c.391.391.391 1.023 0 1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293l-1.293-1.293v4.586h4.586l-1.293-1.293c-.391-.391-.391-1.023 0-1.414.195-.195.451-.293.707-.293s.512.098.707.293l3.707 3.707-3.707 3.707c-.195.195-.451.293-.707.293zm-1.732-2c-.175.301-.268.643-.268 1-.357 0-.699.093-1 .268v-1.268h1.268zm-6.536 0h1.268v1.268c-.301-.175-.643-.268-1-.268 0-.357-.093-.699-.268-1zm0-4c.175-.301.268-.643.268-1 .357 0 .699-.093 1-.268v1.268h-1.268zm6.536 0h-1.268v-1.268c.301.175.643.268 1 .268 0 .357.093.699.268 1z"},child:[]}]})(r)}const G={welcome:{content:"Hello! How can I help you today? I'm your AI assistant powered by AI Display. I can help answer questions, provide information, and assist with various tasks.",provider:"AI Display"}};function Q({isOpen:r}){const[f,M]=t.useState(""),[n,i]=t.useState(!1),[m,y]=t.useState(""),[w,A]=t.useState(null),[g,d]=t.useState([{content:G.welcome.content,provider:G.welcome.provider}]),j=t.useRef(null),u=t.useRef(null);t.useEffect(()=>{pageOnMessage("C_I_SET_INPUTS",a=>{M(a.input),A(a.image),N()}),pageOnMessage("C_I_CLEAR_CHAT",()=>{d([]),M(""),y(""),i(!1),k()}),pageOnMessage("C_I_SET_QUESTION",a=>{i(!0),y(a.question)}),pageOnMessage("C_I_SET_ANSWEAR",a=>{const{answer:o,provider:h}=a;i(!1),d([...g,{content:o,provider:h||"AI Display"}])})});const I=()=>{const a=j.current;a&&(a.scrollTop=a.scrollHeight)},S=()=>{var a;(a=u.current)==null||a.click()},b=a=>{const o=a.target.files[0];if(o&&o.type.startsWith("image/")){const h=new FileReader;h.onload=()=>{A(h.result)},h.readAsDataURL(o)}},k=()=>{A(null),u.current&&(u.current.value="")};t.useEffect(()=>{I();const a=setTimeout(I,100);return()=>clearTimeout(a)},[g,n]);const N=async()=>{f.trim()!==""&&(y(f),M(""),w&&k(),i(!0),d([]),pagePostMessage("C_I_SET_QUESTION",{question:f,image:w}))},T=a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),N())};return r?e.jsxs("div",{className:"flex flex-col h-full animate-fadeIn",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 animate-slideUp",style:{animationDelay:"100ms"},children:e.jsxs("div",{className:" relative grid gap-2",children:[e.jsxs("div",{className:"relative grid grid-cols-[auto,40px]",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("textarea",{value:f,onChange:a=>M(a.target.value),onKeyDown:T,placeholder:"Ask a question...",className:"w-full resize-none rounded-lg border border-gray-300/50 dark:border-indigo-500/30 p-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white/70 dark:bg-indigo-900/20 text-gray-800 dark:text-white backdrop-blur-sm",rows:"2",autoFocus:!0})}),e.jsxs("div",{className:"relative w-full, h-full grid grid-rows-[1fr, 2fr] place-items-center gap-1",children:[e.jsx("button",{onClick:S,className:"h-full p-2 rounded-lg bg-gray-100 dark:bg-indigo-900/30 text-gray-600 dark:text-indigo-300 hover:bg-gray-200 dark:hover:bg-indigo-800/30 transition-colors cursor-pointer",title:"Upload image",children:e.jsx(P,{size:15})}),e.jsx("button",{onClick:N,disabled:f.trim()===""||n,className:`p-2 rounded-lg transition-colors duration-200 ${f.trim()===""||n?"bg-gray-300 text-gray-500 dark:bg-indigo-900/30":"bg-indigo-500 text-white hover:bg-indigo-600"} cursor-pointer`,title:"Send message",children:e.jsx(F,{size:24})})]}),e.jsx("input",{type:"file",ref:u,onChange:b,accept:"image/*",className:"col-span-2 hidden"})]}),w&&e.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-300/50 dark:border-indigo-500/30",children:[e.jsx("img",{src:w,alt:"Selected",className:"w-full object-contain max-h-32"}),e.jsx("button",{onClick:k,className:"absolute top-1 right-1 bg-gray-800/70 text-white p-1 rounded-full hover:bg-gray-900/70",title:"Remove image",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]})}),e.jsxs("div",{className:"relative h-full flex-1 overflow-hidden",children:[e.jsx("button",{onClick:I,className:"absolute bottom-4 right-4 z-10 p-2 bg-blue-500 text-white rounded-full shadow-md hover:bg-blue-600 transition-opacity duration-200 opacity-80 hover:opacity-100",style:{display:"none"},children:e.jsx(W,{size:16})}),e.jsxs("div",{ref:j,className:"absolute inset-0 p-4 space-y-4 overflow-y-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:[m&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 font-medium",children:"Your question:"}),e.jsx("div",{className:"text-gray-800 dark:text-gray-200 font-medium",children:m})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:g.length>1?"Answers":"Answer"}),n&&e.jsxs("div",{className:"animate-pulse bg-gray-50 dark:bg-gray-800 p-3 rounded-lg mb-3",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 font-medium",children:"Thinking..."}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"300ms"}})]})]}),e.jsx("div",{className:"space-y-4",children:g.map((a,o)=>e.jsxs("div",{className:"animate-fadeIn bg-gray-50 dark:bg-gray-800 p-3 rounded-lg shadow-sm",style:{animationDelay:`${o*300}ms`},children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 font-medium",children:a.provider}),e.jsx("div",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:a.content})]},o))})]})]})]})]}):null}function K(){const n=t.useMemo(()=>({min:{w:"160px",h:"50px"},max:{w:"380px",h:"560px"}}),[]),[i,m]=t.useState(!1),[y,w]=t.useState(n.min),[A,g]=t.useState(!1),[d,j]=t.useState({x:0,y:0}),[u,I]=t.useState(null),[S,b]=t.useState(!1),[k,N]=t.useState(!1),[T,a]=t.useState(!1),o=t.useRef(null),h=t.useRef(null);t.useRef(!1);const O=t.useRef({x:0,y:0}),p=t.useRef(null);t.useEffect(()=>{pageOnMessage("C_I_OPEN_CHAT",()=>{m(!0)}),pageOnMessage("C_I_CLOSE_CHAT",()=>{m(!1)}),pageOnMessage("C_I_HIDDEN",()=>{N(!0)}),pageOnMessage("C_I_VISIBLE",()=>{N(!1)})},[]);const D=t.useCallback((s,l,c,x)=>{let C=l.x,L=l.y;return s.left+c>window.innerWidth-0&&(C=window.innerWidth-c-0),s.left<0&&(C=0),s.top+x>window.innerHeight-0&&(L=window.innerHeight-x-0),s.top<0&&(L=0),{x:C,y:L}},[]),H=t.useCallback(s=>{b(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{j(s),setTimeout(()=>{b(!1)},400)})})},[400]),E=t.useCallback(()=>{if(!o.current)return;const s=o.current.getBoundingClientRect(),l=parseInt(n.max.w),c=parseInt(n.max.h),x=D(s,d,l,c);(x.x!==d.x||x.y!==d.y)&&(u||I({x:d.x,y:d.y}),H(x))},[n.max.w,n.max.h,d,u,D,H]);t.useEffect(()=>{w(i?n.max:n.min),i&&E()},[i,n,E]);const R=t.useCallback(()=>{p.current&&clearTimeout(p.current),g(!1),p.current=setTimeout(()=>{g(!0),m(!1)},3e4)},[3e4]),z=t.useCallback(s=>{let l=s.clientX-O.current.x,c=s.clientY-O.current.y;const x=parseInt(i?n.max.w:n.min.w),C=parseInt(i?n.max.h:n.min.h),L=window.innerWidth-x-0,B=window.innerHeight-C-0;return l=Math.max(0,Math.min(l,L)),c=Math.max(0,Math.min(c,B)),{x:l,y:c}},[i,n]);t.useEffect(()=>{const s=h.current;if(!s)return;const l=()=>{pagePostMessage("I_C_IS_DRAGGING",!0,window.parent)},c=()=>{pagePostMessage("I_C_IS_DRAGGING",!1,window.parent)};return s.addEventListener("mousedown",l),document.addEventListener("mouseup",c),()=>{s.removeEventListener("mousedown",l),document.removeEventListener("mouseup",c),p.current&&clearTimeout(p.current)}},[i,n,R,z]),t.useEffect(()=>{R();const s=()=>{R()};return document.addEventListener("mousemove",s),document.addEventListener("mousedown",s),document.addEventListener("keydown",s),document.addEventListener("touchstart",s),()=>{p.current&&clearTimeout(p.current),document.removeEventListener("mousemove",s),document.removeEventListener("mousedown",s),document.removeEventListener("keydown",s),document.removeEventListener("touchstart",s)}},[R]);const _=t.useCallback(()=>{m(!1),u&&(b(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{j(u),setTimeout(()=>{b(!1),I(null)},400)})}))},[u,400]),U=t.useCallback(()=>{i?_():(m(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{E()})}))},[i,E,_]);return e.jsx("div",{className:"fixed",id:"main",style:{top:"0px",left:"0px",zIndex:9999,opacity:A||T?.4:k?0:1,transition:S?"opacity 0.3s ease-in-out, top 0.7s cubic-bezier(0.25, 0.1, 0.25, 1), left 0.7s cubic-bezier(0.25, 0.1, 0.25, 1)":T?"opacity 0.3s ease-in-out":"opacity 0.3s ease-in-out, top 0.3s ease-out, left 0.3s ease-out"},onMouseEnter:()=>g(!1),onMouseLeave:()=>!T&&R(),children:e.jsxs("main",{ref:o,className:"relative grid bg-gradient-to-bl from-[#ffe4e6] to-[#ccfbf1] dark:bg-gradient-to-r dark:from-violet-600 dark:to-indigo-600 rounded-md shadow-md outline-1 outline-white dark:outline-blue-500 overflow-hidden transition-all duration-300 ease-in-out",style:{width:y.w,height:y.h,gridTemplateRows:"auto 1fr"},children:[e.jsxs("section",{className:"relative flex justify-between items-center",style:{height:n.min.h,width:i?n.max.w:n.min.w},children:[e.jsxs("div",{className:"relative h-full flex justify-between items-center p-1",id:"header",style:{width:n.min.w},children:[e.jsx("div",{ref:h,id:"moveElement",className:"relative w-[30%] h-full grid place-items-center bg-gray-950/20 rounded-lg text-2xl cursor-move hover:bg-gray-50/90 text-gray-50 hover:text-gray-950 transition-all duration-200",children:e.jsx(Z,{})}),e.jsx("div",{onClick:U,className:`relative w-[30%] h-full grid place-items-center rounded-lg text-2xl cursor-pointer transition-all duration-200 ${i?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-950/20 text-gray-50 hover:bg-gray-950/40 hover:text-gray-300"}`,children:e.jsx(Y,{})}),e.jsx("div",{className:"relative w-[30%] h-full grid place-items-center bg-gray-950/20 rounded-lg text-2xl cursor-pointer hover:bg-gray-950/40 text-gray-50 hover:text-gray-300 transition-all duration-200",children:e.jsx($,{})})]}),i&&e.jsx("div",{className:"relative h-full p-1",children:e.jsx("div",{onClick:_,className:"relative h-full aspect-[7/6] grid place-items-center bg-red-500 rounded-lg text-3xl cursor-pointer hover:bg-red-700 text-white transition-all duration-200",title:"Close chat",children:e.jsx(q,{})})})]}),e.jsx("div",{className:`relative overflow-hidden transition-all duration-300 ease-in-out ${i?"opacity-100":"opacity-0 max-h-0"}`,style:{maxHeight:i?`calc(${n.max.h} - ${n.min.h})`:"0"},children:e.jsx("div",{className:"h-full",children:e.jsx(Q,{isOpen:i})})})]})})}function X(){return e.jsx(t.StrictMode,{children:e.jsx(K,{})})}V.createRoot(document.getElementById("root")).render(e.jsx(X,{}));
